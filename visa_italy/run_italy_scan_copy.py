from datetime import datetime
from time import sleep

import requests
import undetected_chromedriver.v2 as uc # Import from seleniumwire

# Create a new instance of the Chrome driver
from utils import telegram
from visa_italy.italy import Italy


def send_request(s):
    headers = {
        'Content-Type': 'multipart/form-data; boundary=----WebKitFormBoundarytBSqL24v8uAMtXWk',
        'Origin': 'null',
        'Upgrade-Insecure-Requests': '1',
        'sec-ch-ua': '"Chromium";v="104", " Not A;Brand";v="99", "Google Chrome";v="104"',
        'sec-ch-ua-mobile': '?0',
        'sec-ch-ua-platform': '"macOS"',
    }

    data = '------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="ServizioDescrizione"\r\n\r\nVisto Schengen\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="MessaggioRassicuranteWaitingList"\r\n\r\nFalse\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="isWaitingListEnabled"\r\n\r\nFalse\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="IDServizioConsolare"\r\n\r\n36\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="IDServizioErogato"\r\n\r\n1090\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="IdTipoPrenotazione"\r\n\r\n1\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="NumMaxAccompagnatori"\r\n\r\n4\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="NumAccompagnatoriSelected"\r\n\r\n0\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[0]._Descrizione"\r\n\r\nNumero di passaporto\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[0]._testo"\r\n\r\nAB2680955\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[0]._Obbligatorio"\r\n\r\nFalse\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[0]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n2\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[0]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n2\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[0]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[1]._Descrizione"\r\n\r\nData di scadenza del passaporto (dd/mm/yyyy)\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[1]._data"\r\n\r\n2023-10-12\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[1]._Obbligatorio"\r\n\r\nFalse\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[1]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n5\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[1]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n1\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[1]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[2]._Descrizione"\r\n\r\nMotivo soggiorno\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[2]._Obbligatorio"\r\n\r\nTrue\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[2]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n34\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[2]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n3\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[2]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[3]._Descrizione"\r\n\r\nIndirizzo completo di residenza\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[3]._testo"\r\n\r\nhotel\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[3]._Obbligatorio"\r\n\r\nFalse\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[3]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n25\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[3]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n2\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[3]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[4]._Descrizione"\r\n\r\nStato civile\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[4]._Obbligatorio"\r\n\r\nFalse\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[4]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n17\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[4]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n3\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[4]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[2]._idSelezionato"\r\n\r\n0\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="DatiAddizionaliPrenotante[4]._idSelezionato"\r\n\r\n0\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].CognomeAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].NomeAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DataNascitaAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[0]._Descrizione"\r\n\r\nNumero di passaporto\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n2\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n2\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[1]._Descrizione"\r\n\r\nData di scadenza del passaporto (dd/mm/yyyy)\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n5\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n1\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[2]._Descrizione"\r\n\r\nMotivo soggiorno\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n34\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n3\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[0].IdTipoParentela"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].CognomeAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].NomeAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DataNascitaAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[0]._Descrizione"\r\n\r\nNumero di passaporto\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n2\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n2\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[1]._Descrizione"\r\n\r\nData di scadenza del passaporto (dd/mm/yyyy)\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n5\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n1\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[2]._Descrizione"\r\n\r\nMotivo soggiorno\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n34\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n3\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[1].IdTipoParentela"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].CognomeAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].NomeAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DataNascitaAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[0]._Descrizione"\r\n\r\nNumero di passaporto\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n2\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n2\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[1]._Descrizione"\r\n\r\nData di scadenza del passaporto (dd/mm/yyyy)\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n5\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n1\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[2]._Descrizione"\r\n\r\nMotivo soggiorno\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n34\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n3\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[2].IdTipoParentela"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].CognomeAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].NomeAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DataNascitaAccompagnatore"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[0]._Descrizione"\r\n\r\nNumero di passaporto\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n2\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n2\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[0]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[1]._Descrizione"\r\n\r\nData di scadenza del passaporto (dd/mm/yyyy)\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n5\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n1\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[1]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[2]._Descrizione"\r\n\r\nMotivo soggiorno\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.IDTipoDatoAddizionale"\r\n\r\n34\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.IDTipoControllo"\r\n\r\n3\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].DatiAddizionaliAccompagnatore[2]._TipoDatoAddizionale.RegEx"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="Accompagnatori[3].IdTipoParentela"\r\n\r\n\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="BookingNotes"\r\n\r\nqwer\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="PrivacyCheck"\r\n\r\ntrue\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk\r\nContent-Disposition: form-data; name="PrivacyCheck"\r\n\r\nfalse\r\n------WebKitFormBoundarytBSqL24v8uAMtXWk--\r\n'

    response = s.post('https://prenotami.esteri.it/Services/Booking/1090', headers=headers, data=data)
    print(response)


if __name__ == "__main__":
    html_approintments = html_confirm = html = ''
    while True:
        it = Italy('1090')
        it.open_page('login')
        it.login('sash.kardash@gmail.com', 'Ab123456!')
        while True:
            it.open_page('appointments')
            cookies = it.driver.get_cookies()
            s = requests.Session()
            for cookie in cookies: s.cookies.set(cookie['name'], cookie['value'])
            send_request(s)
            if len(it.driver.find_elements_by_xpath('//input[@id="PrivacyCheck"]')):
                break
            else:
                sleep(5)

        send_request(s)
        html = html_approintments = it.driver.page_source
        it.select_from('//select[@data-index ="2"]', '42')
        it.click_on('//input[@id="PrivacyCheck"]')
        it.click_on('//button[@id="btnAvanti"]')
        it.confirm_alert()
        html = html_confirm = it.driver.page_source
        telegram.send_doc(f'Ошибка Италия(Fields):', html_confirm)

